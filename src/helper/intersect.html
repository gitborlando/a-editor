<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Konva Line Collision Detection</title>
    <script src="https://cdn.jsdelivr.net/npm/konva@8.3.0/konva.min.js"></script>
  </head>
  <body>
    <div id="container"></div>

    <script>
      const stage = new Konva.Stage({
        container: 'container',
        width: window.innerWidth,
        height: window.innerHeight,
      })

      const layer = new Konva.Layer()
      stage.add(layer)

      const line1 = new Konva.Line({
        points: [50, 50, 200, 200],
        stroke: 'red',
        strokeWidth: 5,
      })

      const line2 = new Konva.Line({
        points: [150, 50, 300, 200],
        stroke: 'blue',
        strokeWidth: 5,
      })

      layer.add(line1)
      layer.add(line2)

      stage.on('mousemove', (e) => {
        const mousePos = stage.getPointerPosition()

        const isCollision = line1.intersects({
          x: mousePos.x,
          y: mousePos.y,
        })

        if (isCollision) {
          line1.stroke('green')
        } else {
          line1.stroke('red')
        }

        layer.batchDraw()
      })
    </script>
  </body>
</html>
